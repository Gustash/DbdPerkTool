"use strict";(self.webpackChunk_nrcrast_dbd_icon_toolbox_web_app=self.webpackChunk_nrcrast_dbd_icon_toolbox_web_app||[]).push([[651],{15862:function(e,n,t){var r,a=t(30168),i=t(15751).ZP.i(r||(r=(0,a.Z)(["\n  margin-left: 3px;\n  margin-right: 3px;\n\n  &:hover {\n    color: var(--main-color);\n    cursor: pointer;\n  }\n"])));n.Z=i},52965:function(e,n,t){t.d(n,{Z:function(){return v}});var r,a,i=t(1413),l=t(30168),o=(t(72791),t(75630)),s=t(83532),c=t(15751),d=t(47798),u=t(12576),x=t(15862),h=t(80184),p=c.ZP.div(r||(r=(0,l.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),f=c.ZP.div(a||(a=(0,l.Z)(["\n  flex: 1;\n  margin-left: 10px;\n"])));function v(e){var n,t=void 0,r=e.help;if(e.help){t=(0,h.jsx)(d.Z,{placement:"right",delay:{show:250,hide:1e3},overlay:function(e){return(0,h.jsx)(u.Z,(0,i.Z)((0,i.Z)({id:"pti-tooltip"},e),{},{children:r}))},trigger:["click"],children:(0,h.jsx)(x.Z,{className:"fas fa-question-circle ml-2"})})}return n=e.options?(0,h.jsx)(s.pY,{onChange:e.onChange,onInputChange:e.onInputChange,allowNew:!0,labelKey:"name",options:e.options,value:e.value}):(0,h.jsx)(o.Z.Control,{type:"plaintext",value:e.value,disabled:e.disabled,className:"dbd-input-field",onChange:e.onChange}),(0,h.jsx)(o.Z.Group,{children:(0,h.jsxs)(p,{children:[(0,h.jsx)(o.Z.Label,{className:"field-label-text",children:e.label}),t,(0,h.jsx)(f,{children:n})]})})}},92989:function(e,n,t){t.d(n,{Z:function(){return l}});t(72791);var r=t(43360),a=t(97538),i=t(80184);function l(e){return(0,i.jsxs)(a.Z,{closeVariant:"white",show:e.show,size:"lg",onHide:e.onHide,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,i.jsx)(a.Z.Header,{closeButton:!0,closeVariant:"white",children:(0,i.jsx)(a.Z.Title,{id:"contained-modal-title-vcenter",children:e.title})}),(0,i.jsx)(a.Z.Body,{children:(0,i.jsx)("h4",{children:e.text})}),(0,i.jsx)(a.Z.Footer,{children:(0,i.jsx)(r.Z,{variant:"secondary",onClick:e.onHide,children:"Close"})})]})}},17651:function(e,n,t){t.r(n),t.d(n,{MyProfile:function(){return ae}});var r,a,i=t(93433),l=t(15861),o=t(29439),s=t(30168),c=t(87757),d=t.n(c),u=t(72791),x=t(79271),h=t(75630),p=t(43360),f=t(15751),v=t(92592),g=t(52965),Z=t(41083),m=t(80184),j=f.ZP.div(r||(r=(0,s.Z)(["\n  box-shadow: 0 0.5rem 1rem rgba(35, 132, 164, 0.6);\n  padding: 10px;\n  margin: 10px;\n"]))),b=f.ZP.div(a||(a=(0,s.Z)(["\n  display: flex;\n  flex-direction: row-reverse;\n  margin-right: 10px;\n  align-items: center;\n"])));function w(e){var n=(0,u.useState)(e.label),t=(0,o.Z)(n,2),r=t[0],a=t[1],i=(0,u.useState)(e.link),l=(0,o.Z)(i,2),s=l[0],c=l[1];return(0,m.jsxs)(j,{children:[(0,m.jsx)(b,{children:(0,m.jsx)("i",{onClick:function(){e.onRemove()},className:"fas fa-minus-circle fa-lg author-link-remove"})}),(0,m.jsx)(g.Z,{label:"Name",value:r,onChange:function(n){return t=n.target.value,a(t),void e.onChange(t,s);var t}}),(0,m.jsx)(g.Z,{label:"Link",value:s,onChange:function(n){return t=n.target.value,c(t),void e.onChange(r,t);var t}})]})}var k,C,y,P,S=t(96666),N=t.n(S),R=t(92989),H=t(2143),_=f.ZP.div(k||(k=(0,s.Z)(["\n  display: flex;\n  background: rgba(0, 0, 0, 0.5);\n  flex-direction: column;\n  min-width: 800px;\n  height: fit-content;\n  padding: 10px;\n"]))),D=t(1413),T=t(45987),A=t(71358),I=t(91108),z=t(72426),U=t.n(z),L=["indeterminate"],G=f.ZP.div(C||(C=(0,s.Z)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),E=f.ZP.div(y||(y=(0,s.Z)(["\n  padding-top: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),M=f.ZP.div(P||(P=(0,s.Z)(["\n  padding: 1rem;\n  height: 100%;\n  display: block;\n  max-width: 100%;\n\n  table {\n    width: 100%;\n    border-spacing: 0;\n    border: 1px solid var(--main-color);\n    background: rgba(0, 0, 0, 0.5);\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid var(--main-color);\n      border-right: 1px solid var(--main-color);\n    }\n  }\n"]))),O=u.forwardRef((function(e,n){var t=e.indeterminate,r=(0,T.Z)(e,L),a=u.useRef(),i=n||a;return u.useEffect((function(){i.current.indeterminate=t}),[i,t]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("input",(0,D.Z)({type:"checkbox",ref:i},r))})}));function B(e){var n=e.columns,t=e.data,r=e.fetchData,a=e.loading,o=e.pageCount,s=(0,A.useTable)({columns:n,data:t,initialState:{pageIndex:0},manualPagination:!0,pageCount:o},A.usePagination,A.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var n=e.getToggleAllRowsSelectedProps;return(0,m.jsx)("div",{children:(0,m.jsx)(O,(0,D.Z)({},n()))})},Cell:function(e){var n=e.row;return(0,m.jsx)("div",{children:(0,m.jsx)(O,(0,D.Z)({},n.getToggleRowSelectedProps()))})}}].concat((0,i.Z)(e))}))})),c=s.getTableProps,x=s.getTableBodyProps,h=s.headerGroups,f=s.prepareRow,v=s.selectedFlatRows,g=s.page,j=s.canPreviousPage,b=s.canNextPage,w=s.pageOptions,k=s.pageCount,C=s.gotoPage,y=s.nextPage,P=s.previousPage,S=s.setPageSize,N=s.state,R=N.pageIndex,H=N.pageSize,_=N.selectedRowIds;u.useEffect((function(){r({pageIndex:R,pageSize:H})}),[r,R,H]);var T=(0,u.useContext)(Z.Z);return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"mb-2",children:[Object.keys(_).length>0&&(0,m.jsx)(p.Z,{variant:"secondary",onClick:(0,l.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.map((function(e){var n;return null===(n=T.user)||void 0===n?void 0:n.deleteNotification(e.original)})),e.next=3,Promise.all(n);case 3:I.Z.info("Deleted notifications"),r({pageIndex:R,pageSize:H});case 5:case"end":return e.stop()}}),e)}))),children:"Delete"}),Object.keys(_).length>0&&(0,m.jsx)(p.Z,{variant:"secondary",className:"ml-1",onClick:(0,l.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.filter((function(e){return!1===e.original.read})).map((function(e){var n;return null===(n=T.user)||void 0===n?void 0:n.markNotification(e.original,!0)})),e.next=3,Promise.all(n);case 3:r({pageIndex:R,pageSize:H});case 4:case"end":return e.stop()}}),e)}))),children:"Mark Read"})]}),(0,m.jsxs)("table",(0,D.Z)((0,D.Z)({},c()),{},{children:[(0,m.jsx)("thead",{children:h.map((function(e){return(0,m.jsx)("tr",(0,D.Z)((0,D.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,m.jsxs)("th",(0,D.Z)((0,D.Z)({},e.getHeaderProps()),{},{children:[e.render("Header"),(0,m.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),(0,m.jsxs)("tbody",(0,D.Z)((0,D.Z)({},x()),{},{children:[g.map((function(e,n){return f(e),(0,m.jsx)("tr",(0,D.Z)((0,D.Z)({},e.getRowProps()),{},{children:e.cells.map((function(e){return(0,m.jsx)("td",(0,D.Z)((0,D.Z)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))})),(0,m.jsx)("tr",{children:a?(0,m.jsx)("td",{colSpan:"10000",children:"Loading..."}):(0,m.jsxs)("td",{colSpan:"10000",children:["Showing ",g.length," of ~",o*H," ","results"]})})]}))]})),(0,m.jsxs)(E,{children:[(0,m.jsx)(p.Z,{className:"btn-secondary mr-1",onClick:function(){return C(0)},disabled:!j,children:"<<"})," ",(0,m.jsx)(p.Z,{className:"btn-secondary mr-1",onClick:function(){return P()},disabled:!j,children:"<"})," ",(0,m.jsx)(p.Z,{className:"btn-secondary mr-1",onClick:function(){return y()},disabled:!b,children:">"})," ",(0,m.jsx)(p.Z,{className:"btn-secondary mr-1",onClick:function(){return C(k-1)},disabled:!b,children:">>"})," ",(0,m.jsxs)("span",{children:["Page"," ",(0,m.jsxs)("strong",{children:[R+1," of ",w.length]})," "]}),(0,m.jsxs)("span",{children:["| Go to page:"," ",(0,m.jsx)("input",{type:"number",defaultValue:R+1,onChange:function(e){var n=e.target.value?Number(e.target.value)-1:0;C(n)},className:"paginate-selector"})]})," ",(0,m.jsx)("select",{className:"paginate-selector",value:H,onChange:function(e){S(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return(0,m.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})]})}var F,V,K,q,Y,J,Q=function(){var e=u.useMemo((function(){return[{Header:"Notifications",columns:[{Header:"",accessor:"read",style:{textAlign:"center"},Cell:function(e){return e.value?(0,m.jsxs)("div",{children:[(0,m.jsx)("i",{className:"fas fa-envelope-open-text"})," "]}):(0,m.jsxs)("div",{children:[(0,m.jsx)("i",{className:"fas fa-envelope"})," "]})}},{Header:"Title",accessor:"name"},{Header:"Text",accessor:"text"},{Header:"Age",accessor:"createdAt",Cell:function(e){return(0,m.jsx)("div",{children:U().duration(Date.now()-new Date(e.value).getTime()).humanize()})}}]}]}),[]),n=u.useState([]),t=(0,o.Z)(n,2),r=t[0],a=t[1],i=u.useState(!1),s=(0,o.Z)(i,2),c=s[0],x=s[1],h=u.useState(0),p=(0,o.Z)(h,2),f=p[0],v=p[1],g=u.useRef(0),j=(0,u.useContext)(Z.Z),b=u.useCallback(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.pageSize,r=n.pageIndex,i=++g.current,x(!0),i!==g.current){e.next=16;break}return e.next=6,j.user.getNotifications({page:r+1,limit:t});case 6:return l=e.sent,v(l.meta.totalPages),a(l.data),e.t0=j,e.next=12,H.Z.getUser();case 12:return e.t1=e.sent,e.next=15,e.t0.setUser.call(e.t0,e.t1);case 15:x(!1);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return(0,m.jsx)(G,{children:(0,m.jsx)(M,{children:(0,m.jsx)(B,{columns:e,data:r,fetchData:b,loading:c,pageCount:f})})})},W=t(22522),X=f.ZP.h4(F||(F=(0,s.Z)([""]))),$=f.ZP.h6(V||(V=(0,s.Z)([""]))),ee=f.ZP.div(K||(K=(0,s.Z)(["\n  display: flex;\n  flex-direction: row-reverse;\n  margin-right: 10px;\n  align-items: center;\n"]))),ne=f.ZP.div(q||(q=(0,s.Z)(["\n  display: flex;\n  justify-content: center;\n"]))),te=f.ZP.div(Y||(Y=(0,s.Z)(["\n  display: flex;\n  background: rgba(0, 0, 0, 0.5);\n  flex-direction: column;\n  min-width: 800px;\n  height: 100%;\n  overflow-y: scroll;\n  padding: 10px;\n"]))),re=f.ZP.div(J||(J=(0,s.Z)(["\n  display: flex;\n  background: rgba(0, 0, 0, 0.5);\n  flex-direction: column;\n  min-width: 800px;\n  height: 100%;\n  overflow-y: none;\n  padding: 10px;\n"])));function ae(e){var n,t,r,a,s,c,f,j,b,k,C,y,P=(0,u.useContext)(Z.Z),S=(0,u.useState)(null===(n=P.user)||void 0===n||null===(t=n.author)||void 0===t?void 0:t.blurb),D=(0,o.Z)(S,2),T=D[0],A=D[1],I=(0,u.useState)(null!==(r=null===(a=P.user)||void 0===a||null===(s=a.author)||void 0===s?void 0:s.links)&&void 0!==r?r:[]),z=(0,o.Z)(I,2),U=z[0],L=z[1],G=(0,u.useState)(!1),E=(0,o.Z)(G,2),M=E[0],O=E[1],B=(0,u.useState)(null===(c=P.user)||void 0===c||null===(f=c.author)||void 0===f?void 0:f.donateLink),F=(0,o.Z)(B,2),V=F[0],K=F[1],q=function(){var e=(0,l.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.next=3,H.Z.getUser();case 3:return e.t1=e.sent,e.t0.setUser.call(e.t0,e.t1),e.next=7,null===(n=P.user)||void 0===n?void 0:n.getNotifications();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if((0,u.useEffect)((function(){q()}),[]),!P.user)return(0,m.jsx)(x.l_,{to:W.Z.PERKS});var Y=U.map((function(e,n){return(0,m.jsx)(w,{label:e.label,link:e.link,onChange:function(n,t){e.label=n,e.link=t},onRemove:function(){var e=(0,i.Z)(U);e.splice(n,1),L(e)}},N()())}));return(0,m.jsxs)(re,{children:[(0,m.jsxs)(_,{children:[(0,m.jsx)(ne,{children:(0,m.jsx)(v.Z,{src:P.user.steamAvatarUrl,className:"my-profile-avatar",roundedCircle:!0})}),(0,m.jsxs)($,{children:[(0,m.jsx)("b",{children:"Author Name:"})," ",null===(j=P.user)||void 0===j||null===(b=j.author)||void 0===b?void 0:b.name]}),(0,m.jsxs)($,{children:[(0,m.jsx)("b",{children:"Role:"})," ",P.user.role]}),(0,m.jsxs)($,{children:[(0,m.jsx)("b",{children:"Total pack downloads:"})," ",null!==(k=null===(C=P.user)||void 0===C||null===(y=C.author)||void 0===y?void 0:y.totalDownloads)&&void 0!==k?k:"Unknown"]}),(0,m.jsxs)(h.Z,{onSubmit:function(){var e=(0,l.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,null===H.Z||void 0===H.Z?void 0:H.Z.updateAuthorProfile({blurb:T,donateLink:V,links:U});case 3:return e.t0=P,e.next=6,H.Z.getUser();case 6:return e.t1=e.sent,e.next=9,e.t0.setUser.call(e.t0,e.t1);case 9:O(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,m.jsx)(X,{children:"General"}),(0,m.jsx)(g.Z,{label:"About Me",value:null!==T&&void 0!==T?T:"",onChange:function(e){return A(e.target.value)}}),(0,m.jsx)(g.Z,{label:"Donation Link",value:null!==V&&void 0!==V?V:"",onChange:function(e){return K(e.target.value)}}),(0,m.jsx)(X,{children:"Other Links (Discord, Twitter, etc..)"}),Y,(0,m.jsx)(ee,{children:(0,m.jsx)("i",{onClick:function(){L([].concat((0,i.Z)(U),[{label:"",link:""}]))},className:"fas fa-plus-circle fa-2x author-link-add"})}),(0,m.jsx)(p.Z,{variant:"secondary",type:"submit",children:"Save"})]})]}),(0,m.jsx)(R.Z,{onHide:function(){return O(!1)},title:"Success",text:"Author profile updated successfully!",show:M}),(0,m.jsx)("br",{}),(0,m.jsx)(te,{children:(0,m.jsx)(Q,{})})]})}}}]);
//# sourceMappingURL=651.278d3cd0.chunk.js.map